const fs = require("fs");

function generateDailyCode() {
  const today = new Date().toISOString().split("T")[0]; // ex: "2025-08-06"
  const seed = today.replace(/-/g, "");
  let code = "";

  for (let i = 0; i < 3; i++) {
    let part = "";
    for (let j = 0; j < 4; j++) {
      const charSet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      const index = Math.floor(Math.abs(Math.sin(parseInt(seed) + i * 10 + j)) * charSet.length) % charSet.length;
      part += charSet[index];
    }
    code += part + (i < 2 ? "-" : "");
  }

  const json = {
    date: today,
    code: code
  };

  fs.writeFileSync("redeem.json", JSON.stringify(json, null, 2));
  console.log("âœ… redeem.json generated!");
}

generateDailyCode();
